{% include 'includes/header.html' %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
{% load static %}
<script src="{% static 'js/toDo.js' %}"></script>   <!---got To do List js-->
<link rel="stylesheet" href="{% static 'css/index.css' %}">

{% if user.is_authenticated %}
<!-- Top Buttons for logged-in users -->
    <div class="hero-image">
        <img src="{% static 'images/hobby.jpg' %}" alt="Hobby" class="img-fluid">
        <div class="hero-text">
            <h1>Hobby Tracker</h1>
        </div>
    </div>
    
    <div class="row mb-5 text-center">
        <div class="col-md-12">
            <h3>Welcome to Creative Hobby Tracker</h3>
        </div>

         <!-- Spotify + To-Do Section -->
        <div class="container my-4">
            <div class="row justify-content-center">
                <!-- Spotify Player -->
                <div class="col-md-6 spotify-player">
                    <h5>Relax with Some Music</h5>
                    <iframe style="border-radius:12px" 
                        src="https://open.spotify.com/embed/album/1WVIJaAboRSwJOe4u0n0Q7?utm_source=generator" 
                        width="100%" height="380" frameborder="0" allowfullscreen="" 
                        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
                    </iframe>
                </div>

                <!-- To-Do List -->
                <div class="col-md-6">
                    <h5>Today's To-Do List</h5>
                    <ul id="todo-list" class="list-group mb-3">                     
                    </ul>
                    <div class="input-group">
                        <input type="text" id="todo-input" class="form-control" placeholder="Add new task...">
                        <!-- added csrf token so it saves in db -->
                        <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
                        <button class="btn btn-primary" onclick="addTask()">Add</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    
{% else %}
<!-- Welcome message for anonymous users -->
    <div class="hero-image">
        <img src="{% static 'images/hobby.jpg' %}" alt="Hobby" class="img-fluid">
        <div class="hero-text">
            <h1>Hobby Tracker</h1>
        </div>
    </div>

    <div class="row mb-5 text-center">
        <div class="col-md-12">
            <h3>Welcome to Creative Hobby Tracker</h3>
            <p>Please <a href="{% url 'login' %}">login</a> or <a href="{% url 'register' %}">register</a> to manage your hobbies</p>
        </div>

{% endif %}
    
<!-- Pomodoro Timer (Initially Hidden) -->
<div id="pomodoro-timer" class="container text-center" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000; width: 300px; padding: 20px; border: 2px solid #2196F3; border-radius: 10px; background-color: rgba(255, 255, 255, 0.9); box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);">
    <button id="close-button" class="btn btn-danger btn-sm" style="position: absolute; top: 5px; right: 5px; font-size: 16px;">&times;</button>
    <h5>Pomodoro Timer</h5>
    <div id="timer-display" class="display-4 mb-3">25:00</div>
    <button id="start-button" class="btn btn-success btn-sm mx-2">Start</button>
    <button id="stop-button" class="btn btn-danger btn-sm mx-2" disabled>Stop</button>
    <button id="reset-button" class="btn btn-secondary btn-sm mx-2">Reset</button>
    <p class="mt-3" style="font-size: 12px;">Focus for 25 minutes, then take a short break!</p>
</div>

{% include 'includes/footer.html' %}
